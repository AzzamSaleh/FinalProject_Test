<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>منظّم الخطة الدراسية – واجهة من خطوتين</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <div class="card">
      <h1 class="title">منظّم الخطة الدراسية</h1>
      <div class="muted">خطوتان فقط: اختر تخصّصك ثم حدِّد المواد المُنجزة وعدد الساعات، واضغط توليد — وستظهر النتيجة هنا في نفس الصفحة.</div>
      <div class="steps">
        <div class="step current"><span class="badge">1</span> التخصّص</div>
        <div class="step"><span class="badge">2</span> المواد + التوليد</div>
      </div>
    </div>

    <!-- الصفحة 1: اختيار التخصص -->
    <div id="page1" class="card">
      <div class="title">اختر التخصّص</div>
      <div class="grid2">
        <div>
          <label class="muted">التخصّص</label>
          <select id="major">
            <option value="computer_engineering">هندسة الحاسوب</option>
          </select>
        </div>
        <div>
          <label class="muted">واجهة العرض</label>
          <select id="uiMode">
            <option value="default" selected>إظهار كل المجموعات</option>
            <option value="compact">مجموعات مطوية افتراضياً</option>
          </select>
        </div>
      </div>
      <div class="toolbar end">
        <button class="btn" id="toSubjects">التالي: اختيار المواد</button>
      </div>
    </div>

    <!-- الصفحة 2: اختيار المواد + توليد الجدول في نفس الصفحة -->
    <div id="page2" class="card hidden">
      <div class="title">اختر المواد المُنجزة</div>
      <div class="toolbar wrap">
        <div class="grid3 flex1">
          <input id="search" type="text" placeholder="ابحث باسم المساق أو رقمه…" />
          <div class="pill">المحدَّد: <b id="selectedCount">0</b></div>
          <!-- زر المسح صار بالأسفل بجانب التوليد كما طلبت -->
        </div>
      </div>

      <div class="chipswrap" id="subjectsBox">
        <div class="muted pad10 flexrow"><span class="loader" id="planLoader"></span> جارِ تحميل الخطة…</div>
      </div>

      <!-- عناصر الأسفل: اختيار الساعات + خيار استخدام جريدة المواد + زر المسح + زر التوليد -->
      <div class="bottom-controls">
        <div class="bc-row">
          <div class="bc-left">
            <label class="muted">عدد ساعات هذا الفصل</label>
            <select id="hoursSelect" aria-label="عدد الساعات">
              <!-- <option value="9">9</option> -->
              <option value="10">10</option>
              <!-- <option value="11">11</option> -->
              <option value="12">12</option>
              <!-- <option value="13">13</option>
              <option value="14">14</option> -->
              <option value="15">15</option>
              <!-- <option value="16">16</option>
              <option value="17">17</option> -->
              <option value="18" selected>18</option>
            </select>
          </div>
          <div class="bc-right">
            <label class="check" title="عند التفعيل: نستخدم أوقات ومدرّسي الجامعة ونضمن عدم التعارض. عند إلغاء التفعيل: اقتراح أسماء مواد فقط.">
              <input type="checkbox" id="useOffered" checked>
              <span>استخدم جدول الجامعة (أوقات ومدرّسين)</span>
            </label>
            <button class="btn secondary" id="clearSel">مسح التحديد</button>
            <button class="btn" id="genBtn">
              <span id="genText">توليد الجدول</span>
              <span id="genSpin" class="loader hidden"></span>
            </button>
          </div>
        </div>
      </div>

      <!-- النتائج تظهر هنا على نفس الصفحة -->
      <div id="results" class="results hidden">
        <div class="kpi">
          <div class="card"><div class="muted">إجمالي الساعات</div><div class="value" id="kpiHours">0</div></div>
          <div class="card"><div class="muted">المساقات</div><div class="value" id="kpiCount">0</div></div>
          <div class="card"><div class="muted">تعارضات</div><div class="value" id="kpiConflicts">0</div></div>
        </div>
        <div class="muted" id="summary"></div>
        <table id="resultTable" aria-label="الجدول المقترح">
          <thead>
            <tr><th>المساق</th><th>الساعات</th><th>الوقت</th><th>المدرّس</th><th>التصنيف</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <div class="toast hidden" id="toast"></div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
