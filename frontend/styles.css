:root{
  --bg:#f6f7fb; --card:#fff; --text:#0f172a; --muted:#6b7280; --border:#e5e7eb;
  --primary:#2563eb; --primary-hover:#1d4ed8; --chip:#f1f5f9; --chip-hover:#e2e8f0;
  --chip-selected:#fde68a; --chip-selected-border:#f59e0b;
}
*{box-sizing:border-box}
body{font-family:"Segoe UI",Tahoma,sans-serif;margin:0;background:var(--bg);color:var(--text)}
.container{max-width:1100px;margin:28px auto;padding:0 16px}
.card{background:var(--card);border-radius:16px;border:1px solid var(--border);box-shadow:0 10px 26px rgba(0,0,0,.06);padding:22px;margin-bottom:20px}
.title{font-size:22px;font-weight:800;margin:0 0 10px}
.muted{color:var(--muted);font-size:13px}
.hidden{display:none!important}

.btn{appearance:none;border:none;background:var(--primary);color:#fff;padding:12px 18px;border-radius:12px;cursor:pointer;font-size:15px}
.btn:hover{background:var(--primary-hover)}
.btn.secondary{background:#eef2ff;color:#1f2937}
.btn.secondary:hover{background:#e0e7ff}

select,input[type="text"],input[type="number"]{width:100%;padding:12px;border:1px solid var(--border);border-radius:10px;font-size:15px;background:#fff}

.steps{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0 16px}
.step{display:flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:#fff}
.step.current{border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,.14)}
.badge{display:inline-flex;align-items:center;justify-content:center;min-width:22px;height:22px;padding:0 6px;border-radius:999px;background:var(--primary);color:#fff;font-size:12px}

.toolbar{display:flex;gap:10px;align-items:center;justify-content:space-between;margin:8px 0 14px}
.toolbar.wrap{flex-wrap:wrap}
.toolbar.end{justify-content:flex-end}

.pill{background:#f8fafc;border:1px solid var(--border);padding:8px 12px;border-radius:999px;font-size:13px}

.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid3{display:grid;grid-template-columns:1.4fr .8fr auto;gap:10px}
.flex1{flex:1}

.chipswrap{border:1px solid var(--border);border-radius:12px;max-height:460px;overflow:auto;background:#fff}
details{border-bottom:1px solid var(--border)}
details:last-child{border-bottom:none}
summary{cursor:pointer;padding:10px 12px;font-weight:800;list-style:none}
summary::-webkit-details-marker{display:none}
.chiplist{display:flex;flex-wrap:wrap;gap:8px;padding:10px}
.chip{display:inline-block;padding:8px 12px;border-radius:20px;background:var(--chip);border:1px solid #cbd5e1;cursor:pointer;user-select:none;transition:transform .12s ease,background .12s ease,border-color .12s ease;font-size:14px}
.chip:hover{background:var(--chip-hover);transform:translateY(-1px)}
.chip.selected{background:var(--chip-selected);border-color:var(--chip-selected-border)}
.chip.disabled{opacity:.55;border-style:dashed;cursor:not-allowed}

.bottom-controls{margin-top:14px;border-top:1px solid var(--border);padding-top:12px}
.bc-row{display:flex;gap:10px;flex-wrap:wrap;align-items:end;justify-content:space-between}
.bc-left{min-width:220px;flex:1}
.bc-right{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

.results{margin-top:14px;overflow:auto}
table{width:100%;border-collapse:collapse}
th,td{padding:12px 10px;border-bottom:1px solid var(--border);vertical-align:top}
th{background:#f8fafc;text-align:right;position:sticky;top:0}

.kpi{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0}
.kpi .card{padding:14px}
.kpi .value{font-weight:800;font-size:20px}

.toast{position:fixed;inset-inline-start:16px;bottom:16px;background:#111827;color:#fff;padding:12px 14px;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.26);opacity:.98}
.loader{width:22px;height:22px;border:3px solid #e5e7eb;border-top-color:var(--primary);border-radius:50%;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.pad10{padding:10px}
.flexrow{display:flex;gap:8px;align-items:center}

.check{display:inline-flex;gap:8px;align-items:center;background:#f8fafc;border:1px solid var(--border);padding:8px 12px;border-radius:10px;font-size:13px}
.check input{width:18px;height:18px;accent-color:var(--primary)}
